name: Bendy_BethC Design System — Master Rules
alwaysApply: true
globs:
  - "src/**/*"
  - "build/**/*"

rules:
  ## Source of Truth
  - All design values must come from tokens.json (Tokens Studio export).
  - Authored CSS may NOT contain raw hex/rgb values, ad-hoc spacing, arbitrary font sizes, or magic numbers.
  - Fix gaps only in build transforms, never in component CSS.

  ## Token Architecture
  - Use 3 tiers: primitives → aliases → semantic.
  - Flow must always be: component → semantic → alias → primitive.

  ## Semantic Families
  - surface.* (page, card, elevated, hover, focus, disabled, inverse, overlay)
  - text.* (primary, secondary, inverse, interactive, disabled)
  - icon.* (default, muted, inverse, interactive)
  - border.* (subtle, default, strong, focus) — border-width.* stays in primitives

  ## Naming & Units
  - Use kebab-case for all variables, classes, and files.
  - Variables must be prefixed with --bb- (e.g., --bb-surface-card).
  - Units:
    - spacing, radius, font sizes in rem
    - line-height unitless
    - border widths from tokens (rem)

  ## Responsiveness
  - Prefer fluid-first: clamp(), %, fr, minmax(), auto-fit, auto-fill.
  - Use flex/grid with gap for layout. Hug → fit-content/auto. Fill → flex:1/width:100%.
  - Add media queries only when something truly breaks; document each reason in comments.

  ## Accessibility & Theming
  - Ensure accessible contrast in both light and dark themes.
  - Light tokens at :root, dark overrides under [data-theme="dark"].
  - Visible focus styles must use tokens. Never remove outlines without accessible replacement.
  - Components must be verified in both light and dark themes.

  ## Output Rules
  - Provide one complete file per code block, with intended path labeled at top as a comment.
  - No ellipses or placeholders unless explicitly asking for missing artifact.
  - Commands must specify terminal context (VS Code integrated terminal vs macOS terminal).
  - Every AI reply must follow WHY → HOW → VERIFY format and end with: “Awaiting your result/confirmation.”

  ## Enforcement
  - Lint + CI checks must forbid raw values (except transparent, currentColor, inherit).
  - build/ = generated token CSS (read-only). src/ = authored CSS (globals, components).
  - Pre-commit hooks (husky + lint-staged) must run stylelint/eslint. CI must block merges if rules fail.